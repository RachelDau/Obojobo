@import '../../client/css/defaults';

$search-input-height: 30px;

.repository--nav--links--search {
	position: relative;

	.repository--nav--links--search--icon {
		position: absolute;
		fill: $border-color;
		height: calc(100% - 4px);
		z-index: 2;
		top: 50%;
		transform: translate(0, -54%);
		left: 0.4em;
		width: 0.6em;
		pointer-events: none;

		svg {
			height: 40%;
		}
	}

	input {
		@include text-input;

		z-index: 1;
		background: none;
		top: 0;
		left: 0;
		width: calc(100% - 2px);
		line-height: $search-input-height;
		border: solid 1px $border-color;
		background-color: white;
		border-radius: 3px;
		height: $search-input-height;
		padding-left: 23px;
		padding-right: 10px;
		outline: none;
		position: relative;
		-webkit-appearance: none;

		&::-webkit-search-cancel-button {
			-webkit-appearance: none;

			height: 10px;
			width: 10px;
			background: white;
			border-radius: 50%;
			color: $color-action;
			cursor: pointer;
			background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23777'><path d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/></svg>");
		}

		&:focus {
			outline-width: 0;
		}
	}

	&.is-not-empty {
		> input {
			border-color: $color-action;
			background-color: $color-action;
			color: white;

			&:-webkit-autofill {
				-webkit-text-fill-color: white;
				-webkit-box-shadow: 0 0 0 1000px $color-action inset;
			}
		}

		.repository--nav--links--search--icon {
			fill: white;
		}
	}

	&.is-empty > input:active,
	&.is-empty > input:hover,
	&.is-empty > input:focus {
		border-color: $color-action;

		+ .repository--nav--links--search--icon {
			fill: $color-action;
		}

		&::placeholder {
			color: $color-action;
		}
	}
}
